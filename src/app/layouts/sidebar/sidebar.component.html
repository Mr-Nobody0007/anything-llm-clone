<div class="sidebar-container">
    <button class="new-workspace-btn" (click)="onCreateWorkspace()">
      + New Workspace
    </button>
  
    <div class="workspace-list">
      <div
        class="workspace-item"
        *ngFor="let ws of workspaces"
        [class.active]="ws.id === store.selectedWorkspaceId"
      >
      <div class="workspace-header" (click)="selectWorkspace(ws.id)">
        <div class="workspace-title">
          <span class="workspace-name">{{ ws.name }}</span>
          <img *ngIf="ws.document" 
               [src]="ws.document.sourceIcon" 
               alt="Document" 
               class="workspace-doc-icon"
               [title]="ws.document.title + ' (' + ws.document.document_number + ')'">
        </div>
        <button
          class="workspace-settings"
          (click)="deleteWorkspace(ws.id); $event.stopPropagation()">
        </button>
      </div>
  
        <!-- Thread list within the workspace -->
        <div class="thread-list" *ngIf="ws.id === store.selectedWorkspaceId">
          <div
            class="thread-item"
            *ngFor="let th of ws.threads"
            [class.active]="th.id === store.selectedThreadId"
            (click)="selectThread(th.id, ws.id)"
          >
          {{ th.name }} ({{ th.id }})
          </div>
          <button class="add-thread-btn" (click)="onCreateThread(ws.id)">
            + New Thread
          </button>
        </div>
      </div>
    </div>
  </div>
  